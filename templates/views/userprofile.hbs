<!DOCTYPE html>
<html lang="en">

<head>
    {{>site_head}}
    <title>{{title}}</title>
</head>

<body id="page-top">
<!-- Page Wrapper -->
<div id="wrapper">
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
            {{>header}}
            <!-- Begin Page Content -->
            <div class="container">
                <div class="d-sm-flex align-items-center justify-content-between mb-4">
                    <h1 class="h3 mb-5 text-gray-800">My user account
                        <span style='font-size:50px;'>&#128526;</span>
                    </h1>
                </div>
                <div class="row">
                    <form method="POST" action="/edit/profile/{{userId}}" enctype="multipart/form-data">
                        <div class="col-xl-4 col-md-12 text-center mt-3 mb-5">
                            <div class="preview img-wrapper"></div>
                            <div class="file-upload-wrapper">
                                <input type="file" name="file" class="file-upload-native" accept="image/*" />
                                <input type="text" disabled placeholder="upload image" class="file-upload-text" />
                            </div>
                            <img class="img-profile rounded-circle" src="img/undraw_profile.svg">
                        </div>
                        <button type="submit">submit</button>
                    </form>
                    <div
                            class="col-xl-8 col-md-12 border border-info border-right-0 border-top-0 border-bottom-0 mt-3 mb-5">
                        <div class="container">
                            <form method="POST" class="user" action="/update/user/{{userId}}">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="inputEmail4">Email</label>
                                        <input type="email" class="form-control form-control-user" id="inputEmail4"
                                               placeholder="Email">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="inputPassword4">Password</label>
                                        <input type="password" class="form-control form-control-user"
                                               id="inputPassword4"
                                               placeholder="Password">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputAddress">Address</label>
                                    <input type="text" class="form-control form-control-user" id="inputAddress"
                                           placeholder="1234 Main St">
                                </div>
                                <div class="form-group">
                                    <label for="inputAddress2">Address 2</label>
                                    <input type="text" class="form-control form-control-user" id="inputAddress2"
                                           placeholder="Apartment, studio, or floor">
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="inputCity">City</label>
                                        <input type="text" class="form-control form-control-user" id="inputCity">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="inputState">State</label>
                                        <select id="inputState" class="form-control form-control-user">
                                            <option selected>Choose...</option>
                                            <option>...</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputZip">Zip</label>
                                        <input type="text" class="form-control form-control-user" id="inputZip">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="gridCheck">
                                        <label class="form-check-label" for="gridCheck">
                                            Check me out
                                        </label>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Sign in</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Bootstrap core JavaScript-->
<script src="/vendor/jquery/jquery.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!-- Custom scripts for all pages-->
<script src="/js/sb-admin-2.min.js"></script>
<script src="node_modules/select2/dist/js/select2.min.js"></script>

<script>
    $(function() {
        function maskImgs() {
            //$('.img-wrapper img').imagesLoaded({}, function() {
            $.each($('.img-wrapper img'), function(index, img) {
                var src = $(img).attr('src');
                var parent = $(img).parent();
                parent
                        .css('background', 'url(' + src + ') no-repeat center center')
                        .css('background-size', 'cover');
                $(img).remove();
            });
            //});
        }

        var preview = {
            init: function() {
                preview.setPreviewImg();
                preview.listenInput();
            },
            setPreviewImg: function(fileInput) {
                var path = $(fileInput).val();
                var uploadText = $(fileInput).siblings('.file-upload-text');

                if (!path) {
                    $(uploadText).val('');
                } else {
                    path = path.replace(/^C:\\fakepath\\/, "");
                    $(uploadText).val(path);

                    preview.showPreview(fileInput, path, uploadText);
                }
            },
            showPreview: function(fileInput, path, uploadText) {
                var file = $(fileInput)[0].files;

                if (file && file[0]) {
                    var reader = new FileReader();

                    reader.onload = function(e) {
                        var previewImg = $(fileInput).parents('.file-upload-wrapper').siblings('.preview');
                        var img = $(previewImg).find('img');

                        if (img.length == 0) {
                            $(previewImg).html('<img src="' + e.target.result + '" alt=""/>');
                        } else {
                            img.attr('src', e.target.result);
                        }

                        uploadText.val(path);
                        maskImgs();
                    }

                    reader.onloadstart = function() {
                        $(uploadText).val('uploading..');
                    }

                    reader.readAsDataURL(file[0]);
                }
            },
            listenInput: function() {
                $('.file-upload-native').on('change', function() {
                    preview.setPreviewImg(this);
                });
            }
        };
        preview.init();
    });
</script>

</body>

</html>